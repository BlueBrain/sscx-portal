![SSCx illustration](./doc/sscx.png)

# SSCx portal
The Somatosensory Cortex data explorer

## Getting Started

First, install dependencies:
```bash
yarn
```

To start the portal in development mode, run:

```bash
yarn dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

Some of the data is generated by scripts located in the scripts folder. You can run them in order to get the latest data (it will end-up in src/__generated)

## Build for production

Compile the app in .next folder:

```bash
yarn build
```
### ENV variables

**NEXT_PUBLIC_SSCX_LIVE_CONTENT**: boolean switch to enable SSCx scientific content, by default set to false.

If enabled, the following datasources will be used to fetch the data:
* Nexus KG, might require a NEXUS_TOKEN to be set, see below.
* Static data, requires the content from `/gpfs/bbp.cscs.ch/project/proj109/sscx-portal/static-data` to be present in `./public/data`. GPFS sshfs mount with an alias isn't recommended for this use case due to poor performance.


**NEXT_PUBLIC_NEXUS_TOKEN**: The Service Account Token the portal will use to query the data from Nexus. No token by default. SSCx project data will become publicly accessible once the corresponding scientific paper is published, you can generate a token using your account with access to the `public/sscx` Nexus project.

**NEXT_PUBLIC_NEXUS_URL**: The URL of the Nexus KG deployment, defaults to `https://bbp.epfl.ch/nexus/v1`


## Docker image

Build a Docker image with:
```bash
docker build -t sscx-portal .
```

You can then run it with:
```bash
docker run -it --rm -p 8000:8000 sscx-portal
```