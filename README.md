![SSCx illustration](./doc/sscx.png)

# SSCx portal
The Somatosensory Cortex data explorer

## Getting started

First, install dependencies:
```bash
npm install
```

Add a NEXT_PUBLIC_NEXUS_TOKEN environment variable containing Nexus access token for the public/sscx project
or create a file `.env.local` with it's definition and a token.

Please note, for local (dev) environment SSCx related static content is served from the Kubernetes cluster directly
and available only from EPFL network (onsite or using VPN).

To start the portal in development mode, run:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

Some of the data is generated by scripts located in the scripts folder. You can run them in order to get the latest data

## Build for production

Compile the app in .next folder:

```bash
npm run build
```
### ENV variables

**NEXT_PUBLIC_NEXUS_URL**: The URL of the Nexus KG deployment, defaults to `https://bbp.epfl.ch/nexus/v1`

**NEXT_PUBLIC_NEXUS_TOKEN**: The Service Account Token the portal will use to query the data from Nexus. No token by default. SSCx project data will become publicly accessible once the corresponding scientific paper is published, you can generate a token using your account with access to the `public/sscx` Nexus project.

**NEXT_PUBLIC_STATIC_DATA_BASE_URL**: Base URL for SSCx related static data, due to large size of the data we recommend to use proxy, see in [Getting started](#getting-started)


## Docker image

Build a Docker image with:
```bash
docker build -t sscx-portal .
```

You can then run it with:
```bash
docker run -it --rm -p 8000:8000 sscx-portal
```
