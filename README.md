![SSCx illustration](./doc/sscx.png)

# SSCx portal
The Somatosensory Cortex data explorer

## Getting started

First, install dependencies:
```bash
npm install
```

Add a NEXT_PUBLIC_NEXUS_TOKEN environment variable containing Nexus access token for the public/sscx project
or create a file `.env.local` with it's definition and a token.

Build a proxy docker image which is used to serve SSCx related static content locally from the production deployment:
```bash
npm run build-static-data-proxy
```
The script will ask credentials for the SSCx Portal's production deployment (HTTP basic auth), once build,
can be started with:
```bash
npm run start-static-data-proxy
```

To start the portal in development mode, run:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

Some of the data is generated by scripts located in the scripts folder. You can run them in order to get the latest data

## Build for production

Compile the app in .next folder:

```bash
npm run build
```
### ENV variables

**NEXT_PUBLIC_NEXUS_URL**: The URL of the Nexus KG deployment, defaults to `https://bbp.epfl.ch/nexus/v1`

**NEXT_PUBLIC_NEXUS_TOKEN**: The Service Account Token the portal will use to query the data from Nexus. No token by default. SSCx project data will become publicly accessible once the corresponding scientific paper is published, you can generate a token using your account with access to the `public/sscx` Nexus project.

**NEXT_PUBLIC_NEXUS_PLUGIN_BASE_URL**: Base URL where the Nexus plugins are located, defaults to https://bbp.epfl.ch/nexus/plugins

**NEXT_PUBLIC_STATIC_DATA_BASE_URL**: Base URL for SSCx related static data, due to large size of the data we recommend to use proxy, see in [Getting started](#getting-started)


## Docker image

Build a Docker image with:
```bash
docker build -t sscx-portal .
```

You can then run it with:
```bash
docker run -it --rm -p 8000:8000 sscx-portal
```
